var _t=Object.defineProperty,Tt=Object.defineProperties;var Mt=Object.getOwnPropertyDescriptors;var j=Object.getOwnPropertySymbols;var it=Object.prototype.hasOwnProperty,ct=Object.prototype.propertyIsEnumerable;var st=(r,a,o)=>a in r?_t(r,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[a]=o,lt=(r,a)=>{for(var o in a||(a={}))it.call(a,o)&&st(r,o,a[o]);if(j)for(var o of j(a))ct.call(a,o)&&st(r,o,a[o]);return r},ut=(r,a)=>Tt(r,Mt(a));var dt=(r,a)=>{var o={};for(var d in r)it.call(r,d)&&a.indexOf(d)<0&&(o[d]=r[d]);if(r!=null&&j)for(var d of j(r))a.indexOf(d)<0&&ct.call(r,d)&&(o[d]=r[d]);return o};import*as e from"react";var ft="^\\d+$",xt="^[a-zA-Z]+$",Nt="^[a-zA-Z0-9]+$";function pt(r){let a=setTimeout(r,0),o=setTimeout(r,10),d=setTimeout(r,50);return[a,o,d]}import*as A from"react";function mt(r){let a=A.useRef();return A.useEffect(()=>{a.current=r}),a.current}var Ct=e.createContext({}),Dt=e.forwardRef((kt,Rt)=>{var Y=kt,{value:r,onChange:a,maxLength:o,textAlign:d="left",pattern:T=ft,inputMode:$="numeric",onComplete:k,containerClassName:vt,noScriptCSSFallback:B=Ht,render:L,children:X}=Y,s=dt(Y,["value","onChange","maxLength","textAlign","pattern","inputMode","onComplete","containerClassName","noScriptCSSFallback","render","children"]);var N,tt,et,nt,ot;let[gt,St]=e.useState(typeof s.defaultValue=="string"?s.defaultValue:""),l=r!=null?r:gt,h=mt(l),M=e.useCallback(t=>{a==null||a(t),St(t)},[a]),p=e.useMemo(()=>T?typeof T=="string"?new RegExp(T):T:null,[T]),i=e.useRef(null),U=e.useRef(null),G=e.useRef({value:l,onChange:M,isIOS:typeof window!="undefined"&&((tt=(N=window==null?void 0:window.CSS)==null?void 0:N.supports)==null?void 0:tt.call(N,"-webkit-touch-callout","none"))}),O=e.useRef({prev:[(et=i.current)==null?void 0:et.selectionStart,(nt=i.current)==null?void 0:nt.selectionEnd,(ot=i.current)==null?void 0:ot.selectionDirection]});e.useImperativeHandle(Rt,()=>i.current,[]),e.useEffect(()=>{let t=i.current,n=U.current;if(!t||!n)return;G.current.value!==t.value&&G.current.onChange(t.value),O.current.prev=[t.selectionStart,t.selectionEnd,t.selectionDirection];function u(){if(document.activeElement!==t){C(null),D(null);return}let c=t.selectionStart,v=t.selectionEnd,S=t.selectionDirection,y=t.maxLength,P=t.value,R=O.current.prev,m=-1,b=-1,E;if(P.length!==0&&c!==null&&v!==null){let yt=c===v,Pt=c===P.length&&P.length<y;if(yt&&!Pt){let I=c;if(I===0)m=0,b=1,E="forward";else if(I===y)m=I-1,b=I,E="backward";else if(y>1&&P.length>1){let V=0;if(R[0]!==null&&R[1]!==null){E=I<R[1]?"backward":"forward";let It=R[0]===R[1]&&R[0]<y;E==="backward"&&!It&&(V=-1)}m=V+I,b=V+I+1}}m!==-1&&b!==-1&&m!==b&&i.current.setSelectionRange(m,b,E)}let rt=m!==-1?m:c,at=b!==-1?b:v,wt=E!=null?E:S;C(rt),D(at),O.current.prev=[rt,at,wt]}if(document.addEventListener("selectionchange",u,{capture:!0}),u(),document.activeElement===t&&z(!0),!document.getElementById("input-otp-style")){let c=document.createElement("style");if(c.id="input-otp-style",document.head.appendChild(c),c.sheet){let v="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";H(c.sheet,"[data-input-otp]::selection { background: transparent !important; color: transparent !important; }"),H(c.sheet,`[data-input-otp]:autofill { ${v} }`),H(c.sheet,`[data-input-otp]:-webkit-autofill { ${v} }`),H(c.sheet,"@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"),H(c.sheet,"[data-input-otp] + * { pointer-events: all !important; }")}}let f=()=>{n&&n.style.setProperty("--root-height",`${t.clientHeight}px`)};f();let g=new ResizeObserver(f);return g.observe(t),()=>{document.removeEventListener("selectionchange",u,{capture:!0}),g.disconnect()}},[]);let[Z,K]=e.useState(!1),[x,z]=e.useState(!1),[w,C]=e.useState(null),[_,D]=e.useState(null);e.useEffect(()=>{pt(()=>{var f,g,c,v;(f=i.current)==null||f.dispatchEvent(new Event("input"));let t=(g=i.current)==null?void 0:g.selectionStart,n=(c=i.current)==null?void 0:c.selectionEnd,u=(v=i.current)==null?void 0:v.selectionDirection;t!==null&&n!==null&&(C(t),D(n),O.current.prev=[t,n,u])})},[l,x]),e.useEffect(()=>{h!==void 0&&l!==h&&h.length<o&&l.length===o&&(k==null||k(l))},[o,k,h,l]);let W=e.useCallback(t=>{let n=t.currentTarget.value.slice(0,o);if(n.length>0&&p&&!p.test(n)){t.preventDefault();return}typeof h=="string"&&n.length<h.length&&document.dispatchEvent(new Event("selectionchange")),M(n)},[o,M,h,p]),q=e.useCallback(()=>{var t;if(i.current){let n=Math.min(i.current.value.length,o-1),u=i.current.value.length;(t=i.current)==null||t.setSelectionRange(n,u),C(n),D(u)}z(!0)},[o]),J=e.useCallback(t=>{var R,m;let n=i.current;if(!G.current.isIOS||!t.clipboardData||!n)return;let u=t.clipboardData.getData("text/plain");t.preventDefault();let f=(R=i.current)==null?void 0:R.selectionStart,g=(m=i.current)==null?void 0:m.selectionEnd,S=(f!==g?l.slice(0,f)+u+l.slice(g):l.slice(0,f)+u+l.slice(f)).slice(0,o);if(S.length>0&&p&&!p.test(S))return;n.value=S,M(S);let y=Math.min(S.length,o-1),P=S.length;n.setSelectionRange(y,P),C(y),D(P)},[o,M,p,l]),bt=e.useMemo(()=>({position:"relative",cursor:s.disabled?"default":"text",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none"}),[s.disabled]),Q=e.useMemo(()=>({position:"absolute",inset:0,width:"100%",height:"100%",display:"flex",textAlign:d,opacity:"1",color:"transparent",pointerEvents:"all",background:"transparent",caretColor:"transparent",border:"0 solid transparent",outline:"0 solid transparent",boxShadow:"none",lineHeight:"1",letterSpacing:"-.5em",fontSize:"var(--root-height)",fontFamily:"monospace",fontVariantNumeric:"tabular-nums"}),[d]),Et=e.useMemo(()=>e.createElement("input",ut(lt({},s),{"data-input-otp":!0,"data-input-otp-mss":w,"data-input-otp-mse":_,inputMode:$,pattern:p==null?void 0:p.source,style:Q,maxLength:o,value:l,ref:i,onPaste:t=>{var n;J(t),(n=s.onPaste)==null||n.call(s,t)},onChange:W,onMouseOver:t=>{var n;K(!0),(n=s.onMouseOver)==null||n.call(s,t)},onMouseLeave:t=>{var n;K(!1),(n=s.onMouseLeave)==null||n.call(s,t)},onFocus:t=>{var n;q(),(n=s.onFocus)==null||n.call(s,t)},onBlur:t=>{var n;z(!1),(n=s.onBlur)==null||n.call(s,t)}})),[W,q,J,$,Q,o,_,w,s,p==null?void 0:p.source,l]),F=e.useMemo(()=>({slots:Array.from({length:o}).map((t,n)=>{let u=x&&w!==null&&_!==null&&(w===_&&n===w||n>=w&&n<_),f=l[n]!==void 0?l[n]:null;return{char:f,isActive:u,hasFakeCaret:u&&f===null}}),isFocused:x,isHovering:!s.disabled&&Z}),[x,Z,o,_,w,s.disabled,l]),ht=e.useMemo(()=>L?L(F):e.createElement(Ct.Provider,{value:F},X),[X,F,L]);return e.createElement(e.Fragment,null,B!==null&&e.createElement("noscript",null,e.createElement("style",null,B)),e.createElement("div",{ref:U,"data-input-otp-container":!0,style:bt,className:vt},ht,e.createElement("div",{style:{position:"absolute",inset:0,pointerEvents:"none"}},Et)))});Dt.displayName="Input";function H(r,a){try{r.insertRule(a)}catch(o){console.error("input-otp could not insert CSS rule:",a)}}var Ht=`
[data-input-otp] {
  --nojs-bg: white !important;
  --nojs-fg: black !important;

  background-color: var(--nojs-bg) !important;
  color: var(--nojs-fg) !important;
  caret-color: var(--nojs-fg) !important;
  letter-spacing: .25em !important;
  text-align: center !important;
  border: 1px solid var(--nojs-fg) !important;
  border-radius: 4px !important;
  width: 100% !important;
}
@media (prefers-color-scheme: dark) {
  [data-input-otp] {
    --nojs-bg: black !important;
    --nojs-fg: white !important;
  }
}`;export{Dt as OTPInput,Ct as OTPInputContext,xt as REGEXP_ONLY_CHARS,ft as REGEXP_ONLY_DIGITS,Nt as REGEXP_ONLY_DIGITS_AND_CHARS};
//# sourceMappingURL=index.mjs.map